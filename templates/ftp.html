<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vshell ftp</title>
    <link href="/styles.css" rel="stylesheet">
</head>
<body>
    <header style="padding:16px; border-bottom:1px solid #2f3441; margin-bottom:12px;">
        <h1 style="font-family:system-ui, -apple-system, Segoe UI, Roboto; font-size:20px;">vshell bot FTP</h1>
        <nav id="breadcrumb" style="margin-top:8px; font-size:12px; color:#9aa3b2;"></nav>
    </header>
    <main style="padding: 0 16px 16px;">
           <div id="links" style="display:flex; flex-direction:column; gap:8px; max-width: 900px; margin-left:0; margin-right:auto; align-items:flex-start;"></div>
    </main>
    <script>
        function getPathParts(){
            // /ftp/<path> o /ftp -> extrae <path>
            var p = location.pathname.replace(/^\/?ftp\/?/, '');
            if (!p) return [];
            return p.split('/').filter(Boolean);
        }
        function buildBreadcrumb(){
            var parts = getPathParts();
            var nav = document.getElementById('breadcrumb');
            var html = '<a href="/ftp" style="color:#cbd5e1; text-decoration:none">root</a>';
            var acc = '';
            for (var i=0;i<parts.length;i++){
                acc += (acc? '/':'') + parts[i];
                html += ' / <a href="/ftp/'+acc+'" style="color:#cbd5e1; text-decoration:none">'+parts[i]+'</a>';
            }
            nav.innerHTML = html;
        }
        function icon(type){
            return type === 'folder' ? '/folder.svg' : '/file.svg';
        }
        function add(){
            var a = []//|&&&|
            var coll = new Intl.Collator('es', { numeric: true, sensitivity: 'base' });
            var folders = a.filter(function(it){ return it[1] === 'folder'; }).sort(function(x,y){
                return coll.compare(String(x[0]||''), String(y[0]||''));
            });
            var files = a.filter(function(it){ return it[1] === 'file'; }).sort(function(x,y){
                return coll.compare(String(x[0]||''), String(y[0]||''));
            });
            a = folders.concat(files);
            buildBreadcrumb();
            var root = document.getElementById('links');
            root.innerHTML = '';
            for (var i = 0; i < a.length; i++){
                var it = a[i];
                var card = document.createElement('a');
                card.href = '/'+it[2];
                card.className = 'ftp-card';
                card.style.cssText = 'display:flex; align-items:center; gap:10px; padding:10px; border:1px solid #2f3441; border-radius:8px; text-decoration:none; color:#e5e7eb; background:#0b1220;';
                var img = document.createElement('img');
                img.src = icon(it[1]);
                img.style.cssText = 'height:20px; width:20px; opacity:.9;';
                var span = document.createElement('span');
                span.textContent = it[0];
                span.style.cssText = 'font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;';
                card.appendChild(img);
                card.appendChild(span);
                root.appendChild(card);
            }
        }
        add();
    </script>
</body>
</html>